<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_oldlefty1</spriteName>
  <solid>-1</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>0</persistent>
  <parentName>enemyparent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>vibrate = 0
spd = 0
inv = false
maxhp = 800
hp = 800
prevhp = hp
image_speed = 0
spindir = 10
atks = 0
phase = 1
aggro = false
healed = false
image_xscale = 0.25
image_yscale = 0.25
event_inherited();

enemysword = instance_create(x, y, eleftysword)
enemysword.owner = id
enemyshield = instance_create(x, y, eleftyshield)
enemyshield.owner = id
var deactivate = global.progress[?"lefty dead"];
if !is_undefined(deactivate) &amp;&amp; deactivate {instance_deactivate_object(self)}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited()
player.pothp += 150
global.progress[?"lefty dead"] = true
player.interference = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>phase = 1
alarm[1] = 100
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>phase = 1
spindir = choose(10, -10)
alarm[1] = 200
atks = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>phase = 1
alarm[1] = 100
enemyshield.image_index = 0
healed = false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>phase = 1
spindir = choose(10, -10)
alarm[1] = 200
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>phase = 5
alarm[5] = 80
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>spindir = choose(10, -10)
phase = 5
alarm[5] = 80
atks+=1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>phase = 3
alarm[3] = 150
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if hp &gt; 400
{
phase = 2
alarm[2] = 75
enemysword.alarm[1] = 10
speed = 0
}

else

if atks &gt; 2 {phase = 7} else {phase = 2}

if phase = 2
{
phase = 2
alarm[2] = 75
enemysword.alarm[1] = 10
speed = 0
}

if phase = 7

{
alarm[7] = 90
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>inv = false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if distance_to_object(player) &lt; 250 &amp;&amp; aggro = false 
{
aggro = true;
player.interference = true;
with instance_create(1088 + B, 192 + B, tempwall) owner = other
with instance_create(1088 + B, 256 + B, tempwall) owner = other
with instance_create(1088 + B, 320 + B, tempwall) owner = other
}

if aggro = true
{
event_inherited();

if hp &lt; 1 {instance_destroy()}
if hp &gt; maxhp {hp = maxhp}
if inv = true {image_index = 1} else {image_index = 0}
if prevhp &gt; hp &amp;&amp; inv = false {prevhp -= maxhp / 300}
if prevhp &lt; hp {prevhp = hp}

if enemyshield.leftyshielddir != 0 and phase != 1 {enemyshield.leftyshielddir = 0}

// PHASE 1
if phase = 1
{
speed = 1
enemysword.image_index = 1
/*
if distance_to_object(player)
        {
        direction += 1
        mp_potential_step(player.x, player.y, -1, false)
        }
*/
enemysword.leftysworddir = 0
direction = point_direction(x, y, player.x, player.y) + (spindir * 9)
image_angle = direction - (spindir * 9)
}

// PHASE 2
if phase = 2
{
if alarm[2] = 55 {spindir = choose(10, -10); spd = 0}
if alarm[2] &gt; 55
{enemysword.leftysworddir += 0.5} else
{enemysword.leftysworddir = 0
image_angle -= spindir}
}

//PHASE 3
if phase = 3
{
enemysword.leftysworddir = 0
image_angle -= spindir * 1.2
spd += 0.05
if distance_to_object(player) &gt; 30 {mp_potential_step(player.x, player.y, spd, false)} else {if spd &gt; 0 {spd -= 0.3}}
if alarm[3] &lt; 20 {if spindir &gt; 0 {spindir -= 0.25; spd -= 0.2; if spd &gt; 0 {alarm[3] = 2}} else {spindir += 0.25; spd -= 0.2; if spd &gt; 0 {alarm[3] = 2}}}
if spindir &lt;= 3 or spindir &gt;= -3 {enemysword.damaging = false}
}

//PHASE 4
if phase = 4
{

if alarm[4] = 99
    {
    spindir = 10
    }
image_angle -= spindir * 2.5

if alarm[4] &lt; 60 {damaging = false; if spindir &gt; 0 {spindir -= 0.25} else {spindir += 0.25}}
}

//PHASE 5
if phase = 5
{
vibrate -= 0.05
if vibrate &lt;= 0 {vibrate = 0}
enemysword.leftysworddir = 0
enemysword.image_index = 1
image_index = 2
}

//PHASE 6
if phase = 6
{
healed = true
//if alarm[6] = 149 {for (var i = -4; i &lt; 5; i += 1;){with (instance_create(x,y,holyshot)) direction = image_angle + 8 * i}}
enemyshield.image_index = 2
if alarm[6] &gt; 100 {direction = point_direction(player.x, player.y, x, y); speed = 4; image_angle = direction}
else
{image_index = 2; speed = 0}
if alarm[6] = 100 {enemyheal = instance_create(x, y, leftyheal); enemyheal.owner = id}
}

//PHASE 7
if phase = 7
{
speed = 0;
if alarm[7] &lt;= 10
{
enemysword.leftysworddir -= 1;
enemysword.damaging = false;
}
else
if alarm[7] &gt; 60
{enemysword.leftysworddir += 1}
else
{
instance_create(x + lengthdir_x(80, enemysword.image_angle + 90), y + lengthdir_y(80, enemysword.image_angle + 90), holyparticle);
enemysword.leftysworddir -= 4;
if alarm[7] mod 3 = 0 {with instance_create(x + lengthdir_x(80, enemysword.image_angle + 90), y + lengthdir_y(80, enemysword.image_angle + 90), holyshot) {direction = other.enemysword.image_angle + 80}}
}
}

//PHASE 9
if phase = 9
{
speed = 1
direction = point_direction(player.x, player.y, x, y)
image_angle = point_direction(x, y, player.x, player.y)
if alarm[9] = 90
    {
    alarm[1] = -1
    alarm[2] = -1
    alarm[3] = -1
    alarm[4] = -1
    alarm[5] = -1
    }
}
}

else
{alarm[1] = 50;
image_index = 2}

if sprite_index = spr_oldlefty2 &amp;&amp; phase != 5 {vibrate = 1.5}

if healed = true {repeat(2) instance_create(x + random_range(-20, 20),y + random_range(-20, 20), holyparticle)}

if hp &lt;= 400 &amp;&amp; sprite_index != spr_oldlefty2 
{
sprite_index = spr_oldlefty2; 
with instance_create(x, y, debris) {sprite_index = spr_leftyhelm1; image_angle = other.image_angle; image_xscale = 0.25; image_yscale = 0.25; direction = other.image_angle + 90};
with instance_create(x, y, debris) {sprite_index = spr_leftyhelm2; image_angle = other.image_angle; image_xscale = 0.25; image_yscale = 0.25; direction = other.image_angle - 90};
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="sword">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var shieldcol = 0
with(other){shieldcol = place_meeting(x,y,eleftyshield)}

if enemyshield.leftyshielddir = 5 &amp;&amp; ds_list_find_index(player.weapon.hitlist, id) = -1

{
audio_play_sound(clang2, 10, false); 

if sprite_index = spr_oldlefty1
{phase = 9; alarm[9] = 90}
else
{phase = 6; alarm[6] = 150}

with player script_execute(interrupt)
player.kbdir = point_direction(x, y, player.x, player.y)
player.kb = 20

alarm[1] = -1
alarm[2] = -1
alarm[3] = -1
alarm[4] = -1
alarm[5] = -1
enemysword.leftysworddir = 350
}

else

{
script_execute(damagedscript)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="tempwall">
      <action>
        <libid>1</libid>
        <id>115</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_bounce</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>4</kind>
            <string>1</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="wall">
      <action>
        <libid>1</libid>
        <id>115</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_bounce</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>4</kind>
            <string>1</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="player">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>other.kbdir = point_direction(x, y, other.x, other.y)
other.kb += 3
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if aggro = true {
draw_text_color(85, view_hport - 78, "Old Lefty", c_white, c_white, c_white, c_white, 1)
draw_healthbar(85, view_hport - 40, 1024 - 44, view_hport - 10, prevhp / maxhp * 100, c_black, c_yellow, c_yellow, 0, true, true)
draw_healthbar(85, view_hport - 40, 1024 - 44, view_hport - 10, hp / maxhp * 100, c_black, c_red, c_red, 0, false, true)
draw_sprite(spr_bossbar, 0, 84, view_hport - 41)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self()
draw_sprite_ext(sprite_index, image_index, x+(random_range(-vibrate,vibrate)), y+(random_range(-vibrate,vibrate)), image_xscale, image_yscale, image_angle, image_blend, 1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
