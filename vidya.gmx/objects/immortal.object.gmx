<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_immortal</spriteName>
  <solid>-1</solid>
  <visible>-1</visible>
  <depth>-2</depth>
  <persistent>0</persistent>
  <parentName>enemyparent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited()
image_speed = 0
inv = false
hp = 550
vibrate = 0
phase = 0
aggro = false
aggro_range = 400
fric = 2
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with (instance_create(x+lengthdir_x(sprite_width * .25,image_angle-90),y+lengthdir_y(sprite_width * .25,image_angle-90),immortalchunk))
{
    surf = surface_create(other.sprite_width,other.sprite_height * .5)
    surface_set_target(surf)
    draw_sprite_ext(other.sprite_index,2,other.sprite_xoffset,other.sprite_yoffset-other.sprite_height*.5,other.image_xscale,other.image_yscale,0,c_gray,1)
    surface_reset_target()
    image_angle = other.image_angle
    direction = image_angle - 90
    speed = 4
    other.chunk = id
    spin = -90
}
with(instance_create(x+lengthdir_x(sprite_width * .25,image_angle+90),y+lengthdir_y(sprite_width * .25,image_angle+90),immortalchunk))
{
    surf = surface_create(other.sprite_width,other.sprite_height * .5)
    surface_set_target(surf)
    draw_sprite_ext(other.sprite_index,2,other.sprite_xoffset,other.sprite_yoffset,other.image_xscale,other.image_yscale,0,c_gray,1)
    surface_reset_target()
    image_angle = other.image_angle
    direction = image_angle + 90
    speed = 4
    other.chunk2 = id
    spin = 90
}
player.pothp += 35
chunk.partner = chunk2.id
chunk2.partner = chunk.id
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>alarm[1] = 200
phase = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>alarm[1] = 220
phase = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>alarm[2] = 160
phase = 2
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>inv=false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if player_seen = true &amp;&amp; aggro = false &amp;&amp; alarm[3] &lt;= 0 {aggro = true; phase = 1; alarm[1] = 220}
if hp &lt;= 0 {instance_destroy()}

if phase = 1 
{
if alarm[1] mod 62 = 0 {speed = 14; direction = point_direction(x, y, player.x, player.y); image_angle = direction; vibrate = 5}

if speed &gt; 0
{
{
var i;
for (i = 0; place_meeting(x+lengthdir_x(speed + 1 - i, direction), y+lengthdir_y(speed + 1 - i, direction), wall); i += 1)
   {
   }
}
speed -= i;
}

if speed &gt; 0 {speed -= 0.3; repeat(2) with instance_create(x + random_range(-22, 22), y + random_range(-32, 32), immortalparticle) {direction = other.direction + 180 + random_range(-20, 20); speed = other.speed / 2}}
if speed &lt; 0 {speed = 0}
if vibrate &gt; 0 {vibrate -= 0.1}
if vibrate &lt; 0 {vibrate = 0}
if speed &gt; 4 {image_index = 1} else {image_index = 0}
}

if phase = 2
{
direction = point_direction(x, y, player.x, player.y)
image_angle = direction

if distance_to_object(player) &lt; 30 speed = 0 else 
if alarm[2] &gt; 96 speed = 2 else
if alarm[2] &gt; 30 speed = 1 else
if alarm[2] &gt; 0 speed = 0

if alarm[2] &lt; 96 &amp;&amp; alarm[2] &gt; 30 
    {
    
    if alarm[2] mod 3 = 0
    {
    with instance_create(x, y, immortalshot) 
    {direction = point_direction(player.x, player.y, x, y) + random_range(-120, 120); speed = random_range(2, 9)}
    }
    image_index = 1
    vibrate = 3
    instance_create(x, y, immortalparticle)
    
    }
else

    {
    image_index = 0
    vibrate = 0
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="sword">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>damagedscript</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self()
draw_sprite_ext(spr_immortal, image_index, x+(random_range(-vibrate,vibrate)), y+(random_range(-vibrate,vibrate)), image_xscale, image_yscale, image_angle, image_blend, image_alpha);
if alarm[3] &gt; 0 
{
draw_sprite_ext(spr_immortal, image_index, x, y, image_xscale, image_yscale, image_angle, c_gray, alarm[3] / 50);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
