<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_necro</spriteName>
  <solid>-1</solid>
  <visible>-1</visible>
  <depth>-3</depth>
  <persistent>0</persistent>
  <parentName>enemyparent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>enemysword = instance_create(x, y, necrostaff)
enemysword.owner = id
aggro = false
inv = false
maxhp = 1550
hp = 1550
phase = -4
prevhp = hp
hurt = 35
image_speed = 0
shotnum = 30
shotdir = 0
dist = 200
//audio_stop_sound(music1)
//audio_play_sound(music1, 10, true)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>101</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_move</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>000000000</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited()
with enemysword instance_destroy()
player.pothp += 100
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>phase = 1
alarm[1] = 160
image_index = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if hp &gt; 500 {phase = 1; alarm[1] = 160}
else
{phase = 4; alarm[4] = 80}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>phase = 3
speed = 3
alarm[3] = 120
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//direction = (point_direction(x, y, room_width/2, room_height/2))
direction = (random(360))
speed = 3
if hp &lt; 28 speed = 3
if hp &lt; 20 speed = 4
if hp &lt; 12 speed = 5
if hurt != hp {phase = 2; hurt = hp; alarm[2] = 230} else {phase = 3; alarm[3] = 120}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>inv = false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_angle = point_direction(x, y, player.x, player.y)
if hp &lt; 1 {instance_destroy()}
if x &lt; 0 {x += 100}
if x &gt; room_width {x -= 100}
if y &lt; 0{y += 100}
if y &gt; room_height {y -= 100}

if hp &lt; 550 &amp;&amp; image_index = 0 {image_index = 1}

if prevhp &gt; hp &amp;&amp; inv = false {prevhp -= maxhp / 300}
if prevhp &lt; hp {prevhp = hp}

if distance_to_object(player) &lt; 300 &amp;&amp; aggro = false {aggro = true; with instance_create(0+B, 704+B, tempwall) owner = other; with instance_create (0+B, 768+B, tempwall) owner = other; phase = 1; alarm[1] = 160}

if aggro = true

{

// PHASE 1
if phase = 1{

if alarm[1] = 120
{
audio_play_sound(spell, 10, false)
for (var i = 0; i &lt; 360; i += 36;){ with (instance_create(x,y,necroshot)) direction = i}
}

if alarm[1] = 100 {
audio_play_sound(spell, 10, false)
for (var i = 0; i &lt; 360; i += 36;){ with (instance_create(x,y,necroshot)) direction = i}
}
}

if alarm[1] = 80 {
audio_play_sound(spell, 10, false)
for (var i = 0; i &lt; 360; i += 36;){ with (instance_create(x,y,necroshot)) direction = i}
}


// PHASE 2
if phase = 2{
//if distance_to_object(player) &lt; 150 {direction += 1}
if alarm[2] mod 30 = 0 &amp;&amp; alarm[2] &gt; 80 {instance_create(x, y, necroshot2); audio_play_sound(spell, 10, false)}
instance_create(x, y, moss)    
if alarm[2] = 229 {instance_create(x, y, seed)}
if alarm[2] = 190 &amp;&amp; hp &lt; 1200 {instance_create(x, y, seed)}
if alarm[2] = 160 &amp;&amp; hp &lt; 550 {instance_create(x, y, seed)}
}

// PHASE 3
if phase = 3{
if hp &gt; 500 {
speed = 0
if alarm[3] mod 20 - 10 = 0 &amp;&amp; alarm[3] &lt; 111 &amp;&amp; alarm[3] &gt; 69 {instance_create(x, y, necroshot2); audio_play_sound(spell, 10, false)}
}
else
{
speed = 0
if alarm[3] mod 10 = 0 &amp;&amp; alarm[3] &lt; 111 &amp;&amp; alarm[3] &gt; 59 {instance_create(x, y, necroshot2); audio_play_sound(spell, 10, false)}
}
}

// PHASE 4
if phase = 4 {
image_index = 2
if alarm[4] = 79 {audio_play_sound(spellcharge2, 10, false)}
instance_create(x + random_range(-80, 80), y + random_range(-80, 80), necroparticle3)
if alarm[4] = 60{
var dist = sqrt(power(room_width - CELL_SIZE * 2 * BUFFER_CELLS,2)+power(room_height - CELL_SIZE * 2 * BUFFER_CELLS,2));
for(var i = 0; i &lt; shotnum; i++)
  instance_create(x + lengthdir_x(dist,i * 360/shotnum),y + lengthdir_y(dist,i * 360/shotnum),necroshot3)
}
}

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="overgrown2">
      <action>
        <libid>1</libid>
        <id>115</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_bounce</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="overgrown">
      <action>
        <libid>1</libid>
        <id>115</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_bounce</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="sword">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>damagedscript</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="wall">
      <action>
        <libid>1</libid>
        <id>115</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_bounce</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="player">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>direction = point_direction(player.x, player.y, x, y)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if aggro = true 
{
draw_text_color(5, view_hport - 78, "Druid Necromancer", c_white, c_white, c_white, c_white, 1)
draw_healthbar(5, view_hport - 40, 1024 - 124, view_hport - 10, prevhp / maxhp * 100, c_black, c_yellow, c_yellow, 0, true, true)
draw_healthbar(5, view_hport - 40, 1024 - 124, view_hport - 10, hp / maxhp * 100, c_black, c_red, c_red, 0, false, true)
draw_sprite(spr_bossbar, 0, 4, view_hport - 41)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
